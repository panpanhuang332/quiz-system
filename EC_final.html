<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>期末考自測系統 - 40抽25</title>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; --border: #cbd5e1; }
        body { font-family: -apple-system, "Microsoft JhengHei", sans-serif; background: var(--bg); display: flex; justify-content: center; padding: 20px; line-height: 1.6; }
        .quiz-container { background: white; width: 100%; max-width: 600px; padding: 30px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); }
        .progress-wrapper { margin-bottom: 25px; }
        .progress-text { font-size: 0.85rem; color: #64748b; margin-bottom: 5px; display: flex; justify-content: space-between; }
        .progress-bar { height: 6px; background: #e2e8f0; border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--primary); transition: width 0.3s; }
        .question-title { font-size: 1.2rem; font-weight: bold; margin-bottom: 20px; color: #1e293b; min-height: 3.5em; }
        .option-item { display: flex; align-items: center; padding: 12px 15px; margin-bottom: 12px; border: 1px solid var(--border); border-radius: 8px; cursor: pointer; transition: 0.2s; }
        .option-item:hover { background: #f1f5f9; border-color: var(--primary); }
        .option-item input[type="radio"] { width: 18px; height: 18px; margin-right: 12px; cursor: pointer; }
        .option-label { cursor: pointer; font-size: 1rem; flex-grow: 1; color: #334155; }
        .option-item.active { background: #eff6ff; border-color: var(--primary); font-weight: bold; }
        .nav-section { display: flex; justify-content: space-between; margin-top: 30px; gap: 15px; }
        .btn { padding: 12px 24px; border-radius: 6px; border: none; cursor: pointer; font-weight: 600; font-size: 1rem; flex: 1; text-align: center; }
        .btn-prev { background: #e2e8f0; color: #475569; }
        .btn-next { background: var(--primary); color: white; }
        .btn-submit { background: #10b981; color: white; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .hidden { display: none; }
        .error-msg { color: red; background: #fee2e2; padding: 15px; border-radius: 8px; font-size: 0.9rem; margin-bottom: 20px; }
        #result-area { text-align: center; }
        .score-display { font-size: 4rem; font-weight: 800; color: var(--primary); margin: 10px 0; }
        .wrong-review { text-align: left; margin-top: 20px; border-top: 1px solid #eee; padding-top: 20px; max-height: 400px; overflow-y: auto; }
    </style>
</head>
<body>

<div class="quiz-container" id="quiz-box">
    <div id="error-console" class="hidden"></div>
    <div class="progress-wrapper">
        <div class="progress-text">
            <span id="q-count">題目：1 / 25</span>
            <span id="percent">0%</span>
        </div>
        <div class="progress-bar"><div class="progress-fill" id="progress-fill"></div></div>
    </div>

    <div id="question-area">
        <div class="question-title" id="question-text">系統啟動中...</div>
        <div id="options-container"></div>
    </div>

    <div class="nav-section">
        <button class="btn btn-prev" id="prev-btn" onclick="goPrev()" disabled>⬅ 上一題</button>
        <button class="btn btn-next" id="next-btn" onclick="goNext()">下一題 ➡</button>
        <button class="btn btn-submit hidden" id="submit-btn" onclick="finish()">完成交卷</button>
    </div>
</div>

<div class="quiz-container hidden" id="result-area">
    <h2>測驗結束</h2>
    <div class="score-display" id="final-score">0</div>
    <p>您的總分 (100 分制)</p>
    <button class="btn btn-next" onclick="location.reload()">重新挑戰 (換新題目)</button>
    <div class="wrong-review" id="review-content"></div>
</div>

<script>
// 使用 try-catch 包裹整個邏輯，防止崩潰不報錯
try {
    const fullBank = [
        {"q": "品牌使用大型通路平台的優勢有哪些？", "options": ["進入市場快速、現有客流、基礎設施完善", "初期流量較低、平台限制、成長規模限制", "前期投入高、持續維護、獲客成本高", "完全掌控、獨特品牌體驗、資料掌控、無平台抽成"], "a": "進入市場快速、現有客流、基礎設施完善"},
        {"q": "網路開店的可選擇的平台主要分為哪三大類？", "options": ["自建官網、使用大型通路平台或開店平台", "使用電子郵件、使用簡訊、使用通訊軟體", "使用通訊軟體、使用影音平台、使用論壇", "自建APP、使用社群平台、使用部落格"], "a": "自建官網、使用大型通路平台或開店平台"},
        {"q": "自建官網前期通常需要較高的什麼投入？", "options": ["人力", "資源", "時間", "行銷"], "a": "資源"},
        {"q": "品牌自建官網的挑戰有哪些？", "options": ["操作複雜、功能不足、安全性低", "初期流量較低、平台限制、成長規模限制", "品牌曝光有限、價格競爭激烈、無法掌控顧客資料、平台抽成", "前期投入高、持續維護、獲客成本高"], "a": "前期投入高、持續維護、獲客成本高"},
        {"q": "哪個平台允許品牌完全掌控客戶資料？", "options": ["僅免費部落格平台", "自建官網和透過開店平台所架設的官網", "僅社群媒體平台", "僅大型通路平台"], "a": "自建官網和透過開店平台所架設的官網"},
        {"q": "哪個平台更適合針對特定利基市場的品牌？", "options": ["社群媒體平台", "大型通路平台", "自建官網", "免費部落格平台"], "a": "自建官網"},
        {"q": "哪種產品可能更適合在大型通路平台上銷售？", "options": ["標準化的大眾商品", "客製化的商品", "獨特的手工藝品", "限量版的商品"], "a": "標準化的大眾商品"},
        {"q": "哪個平台適合想要快速觸及大量潛在客戶的賣家？", "options": ["大型通路平台", "開店平台", "自建官網", "社群媒體平台"], "a": "大型通路平台"},
        {"q": "企業必須根據什麼來做出最佳決策？", "options": ["自身需求和長遠發展目標", "市場流行趨勢", "專家建議", "競爭對手的選擇"], "a": "自身需求和長遠發展目標"},
        {"q": "品牌自建官網的優勢有哪些？", "options": ["進入市場快速、現有客流、基礎設施完善", "快速開店、保留品牌控制權、彈性整合、顧客資料掌控", "完全掌控、獨特品牌體驗、資料掌控、無平台抽成", "低前期投入、無需持續維護、獲客成本低"], "a": "完全掌控、獨特品牌體驗、資料掌控、無平台抽成"},
        {"q": "在數位時代，開啟一家線上商店的哪個面向比以往任何時候都來得簡單？", "options": ["選擇商品", "行銷推廣", "開啟線上商店", "客戶服務"], "a": "開啟線上商店"},
        {"q": "品牌使用大型通路平台的挑戰有哪些？", "options": ["前期投入高、持續維護、獲客成本高", "操作複雜、功能不足、安全性低", "品牌曝光有限、價格競爭激烈、無法掌控顧客資料、平台抽成", "初期流量較低、平台限制、成長規模限制"], "a": "品牌曝光有限、價格競爭激烈、無法掌控顧客資料、平台抽成"},
        {"q": "哪個平台通常需要有更多的時間和資源維護與更新？", "options": ["店平台", "社群媒體平台", "自建官網", "大型通路平台"], "a": "自建官網"},
        {"q": "長期來看，什麼可能會逐漸增加品牌的經營成本？", "options": ["物流費用", "平台的抽成和廣告費用", "網站維護費用", "客戶服務費用"], "a": "平台的抽成和廣告費用"},
        {"q": "哪個因素往往是最直接的限制因素？", "options": ["長期發展", "目標客群", "預算", "技術能力"], "a": "預算"},
        {"q": "哪個平台雖然可以帶來快速增長，但客戶往往是對平台而非單一賣家產生忠誠度？", "options": ["社群媒體平台", "大型通路平台", "自建官網", "開店平台"], "a": "大型通路平台"},
        {"q": "管理網站需要什麼投入？", "options": ["持續的時間", "僅人力", "僅金錢", "僅技術"], "a": "持續的時間"},
        {"q": "如果希望建立強大的品牌認知度和客戶忠誠度，哪些平台或許是更好的選擇？", "options": ["僅免費部落格平台", "僅社群媒體平台", "僅大型通路平台", "自建官網和開店平台"], "a": "自建官網和開店平台"},
        {"q": "開店平台則介於哪兩者之間？", "options": ["自建官網和大型通路平台", "網路商店和行動應用程式", "大型通路平台和實體店面", "實體店面和網路商店"], "a": "自建官網和大型通路平台"},
        {"q": "哪些對象適合品牌使用大型通路平台？", "options": ["剛起步的小型企業或個人賣家、需要快速測試市場反應的新品牌或產品、無法自行處理物流、金流等複雜經營事務的商家", "中小型品牌，渴望建立品牌獨立性，但又不具備完全自建官網資源的商家", "希望長期經營自有品牌並累積顧客忠誠度的商家", "擁有充足資金和技術資源的中大型品牌或企業"], "a": "剛起步的小型企業或個人賣家、需要快速測試市場反應的新品牌或產品、無法自行處理物流、金流等複雜經營事務的商家"},
        {"q": "哪個平台上的競爭通常最為激烈？", "options": ["開店平台", "社群媒體平台", "自建官網", "大型通路平台"], "a": "大型通路平台"},
        {"q": "品牌使用開店平台的優勢有哪些？", "options": ["前期投入高、持續維護、獲客成本高", "品牌曝光有限、價格競爭激烈、無法掌控顧客資料、平台抽成", "快速開店、保留品牌控制權、彈性整合、顧客資料掌控", "操作複雜、功能不足、安全性低"], "a": "快速開店、保留品牌控制權、彈性整合、顧客資料掌控"},
        {"q": "開店平台作為一種什麼的解決方案，正逐漸成為主流的網站經營方式？", "options": ["高門檻、高效率", "低門檻、低效率", "低門檻、高效率", "高門檻、低效率"], "a": "低門檻、高效率"},
        {"q": "選擇不同的開店平台能接觸到什麼？", "options": ["更少的客群", "相同的客群", "沒有客群", "不同的客群"], "a": "不同的客群"},
        {"q": "選擇合適的電商平台是一門什麼？", "options": ["藝術", "技術", "數學", "科學"], "a": "藝術"},
        {"q": "選擇網路開店平台時，最重要的考量是什麼？", "options": ["平台的美觀程度", "自身需求和長遠發展目標", "平台的價格", "平台的知名度"], "a": "自身需求和長遠發展目標"},
        {"q": "哪個平台提供了最大的控制權和靈活性？", "options": ["開店平台", "免費部落格平台", "自建官網", "大型通路平台"], "a": "自建官網"},
        {"q": "如果缺乏網頁設計和開發技能，要建制品牌官網需要？", "options": ["聘請專業人員或委外給相關開發公司", "放棄自建官網", "使用免費的網站模板", "自學相關技能"], "a": "聘請專業人員或委外給相關開發公司"},
        {"q": "自建官網如同在網路上打造一座什麼？", "options": ["專屬的直營店", "網路攤位", "熱鬧的購物中心", "客製化的商店"], "a": "專屬的直營店"},
        {"q": "大型通路平台和開店平台提供了什麼，讓即使沒有技術背景的人也能輕鬆管理網站？", "options": ["專業的技術團隊", "複雜的程式碼", "使用者友善的介面和工具", "客製化的功能"], "a": "使用者友善的介面和工具"},
        {"q": "哪種產品可能更適合自建官網或開店平台？", "options": ["在大型通路平台上熱銷的商品", "價格敏感的商品", "容易大量生產的商品", "獨特的手工藝品或定制產品"], "a": "獨特的手工藝品或定制產品"},
        {"q": "哪些對象適合品牌自建官網？", "options": ["需要快速測試市場反應的新品牌或產品", "無法自行處理物流、金流等複雜經營事務的商家", "剛起步的小型企業或個人賣家", "擁有充足資金和技術資源的中大型品牌或企業、需要高度客製化、強調品牌獨特性的品牌、有能力自行進行數位行銷、且希望望掌控完整顧客資料的商家"], "a": "擁有充足資金和技術資源的中大型品牌或企業、需要高度客製化、強調品牌獨特性的品牌、有能力自行進行數位行銷、且希望望掌控完整顧客資料的商家"},
        {"q": "許多成功的品牌採用了什麼策略，在不同平台上建立，以最大化自己在市場上的市佔？", "options": ["多通路策略", "僅經營實體店面", "單一通路策略", "僅經營單一社群媒體平台"], "a": "多通路策略"},
        {"q": "自建官網需要較強的什麼支援？", "options": ["行銷", "財務", "法律", "技術"], "a": "技術"},
        {"q": "品牌如何為自己挑選最適合的開店方式？", "options": ["參考競爭對手的選擇", "根據市場流行趨勢", "聽從專家建議", "綜合考慮多個因素"], "a": "綜合考慮多個因素"},
        {"q": "在大型通路平台或開店平台上開店的初期成本如何？", "options": ["較低", "非常高", "高", "中等"], "a": "較低"},
        {"q": "哪些對象適合品牌使用開店平台？", "options": ["希望完全掌控網站所有細節的商家", "剛起步的小型企業或個人賣家", "擁有充足資金和技術資源的中大型品牌或企業", "中小型品牌，渴望建立品牌獨立性，但又不具備完全自建官網資源的商家、希望快速開店，並且能靈活運用各種服務和工具的商家、需要掌握顧客資料進行會員經營和再行銷的企業"], "a": "中小型品牌，渴望建立品牌獨立性，但又不具備完全自建官網資源的商家、希望快速開店，並且能靈活運用各種服務和工具的商家、需要掌握顧客資料進行會員經營和再行銷的企業"},
        {"q": "品牌使用開店平台的挑戰有哪些？", "options": ["初期流量較低、平台限制、成長規模限制", "低前期投入、無需持續維護、獲客成本低", "完全掌控、獨特品牌體驗、資料掌控、無平台抽成", "進入市場快速、現有客流、基礎設施完善"], "a": "初期流量較低、平台限制、成長規模限制"},
        {"q": "大型通路平台則像是在何處租下一個攤位？", "options": ["熱鬧的購物中心", "偏遠的郊區", "安靜的街道", "虛擬世界"], "a": "熱鬧的購物中心"},
        {"q": "哪些是大型通路平台的案例？", "options": ["CYBERBIZ、Shopline", "品牌官網", "社群媒體平台", "momo、PChome"], "a": "momo、PChome"}
    ];

    let examList = [];
    let currentIndex = 0;
    let userChoices = {};

    function shuffle(arr) {
        let array = [...arr];
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }

    function render() {
        const qData = examList[currentIndex];
        document.getElementById('q-count').innerText = `題目：${currentIndex + 1} / 25`;
        const progress = ((currentIndex + 1) / 25) * 100;
        document.getElementById('percent').innerText = Math.round(progress) + '%';
        document.getElementById('progress-fill').style.width = progress + '%';
        document.getElementById('question-text').innerText = qData.q;

        const container = document.getElementById('options-container');
        container.innerHTML = '';

        if (!qData.mixedOptions) qData.mixedOptions = shuffle(qData.options);

        qData.mixedOptions.forEach((opt, i) => {
            const div = document.createElement('div');
            div.className = 'option-item' + (userChoices[currentIndex] === opt ? ' active' : '');
            div.onclick = () => {
                userChoices[currentIndex] = opt;
                render();
            };
            div.innerHTML = `
                <input type="radio" name="exam" id="o${i}" ${userChoices[currentIndex] === opt ? 'checked' : ''}>
                <label class="option-label" for="o${i}">${opt}</label>
            `;
            container.appendChild(div);
        });

        document.getElementById('prev-btn').disabled = (currentIndex === 0);
        if (currentIndex === 24) {
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('submit-btn').classList.remove('hidden');
        } else {
            document.getElementById('next-btn').classList.remove('hidden');
            document.getElementById('submit-btn').classList.add('hidden');
        }
    }

    window.goNext = function() { if (currentIndex < 24) { currentIndex++; render(); window.scrollTo(0,0); } };
    window.goPrev = function() { if (currentIndex > 0) { currentIndex--; render(); window.scrollTo(0,0); } };

    window.finish = function() {
        const answered = Object.keys(userChoices).length;
        if (answered < 25) {
            if (!confirm(`尚有 ${25 - answered} 題未作答，確定交卷？`)) return;
        }
        let score = 0;
        let reviewHTML = '<h3>錯題整理：</h3>';
        examList.forEach((item, i) => {
            if (userChoices[i] === item.a) {
                score += 4;
            } else {
                reviewHTML += `<div class="wrong-review" style="background:#fff5f5; padding:10px; margin-bottom:10px; border-radius:8px;">
                    <b>${i+1}. ${item.q}</b><br>
                    <span style="color:red;">您的答案：${userChoices[i] || '未作答'}</span><br>
                    <span style="color:green;">正確答案：${item.a}</span>
                </div>`;
            }
        });
        document.getElementById('quiz-box').classList.add('hidden');
        document.getElementById('result-area').classList.remove('hidden');
        document.getElementById('final-score').innerText = score;
        document.getElementById('review-content').innerHTML = (score === 100) ? '完美滿分！' : reviewHTML;
    };

    // 啟動
    window.onload = function() {
        examList = shuffle(fullBank).slice(0, 25);
        render();
    };

} catch (err) {
    // 萬一出錯，在畫面上印出錯誤訊息
    document.getElementById('error-console').classList.remove('hidden');
    document.getElementById('error-console').innerHTML = `<div class="error-msg">系統啟動失敗，錯誤訊息：${err.message}</div>`;
}
</script>
</body>
</html>